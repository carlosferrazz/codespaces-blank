<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>NeuroProfit AI</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0f172a;
  color:white;
}

.wrapper{
  display:flex;
  height:100vh;
}

.sidebar{
  width:240px;
  background:#111827;
  padding:20px;
  display:flex;
  flex-direction:column;
}

.sidebar h2{
  margin-bottom:30px;
}

.menu-item{
  padding:12px;
  margin-bottom:8px;
  cursor:pointer;
  border-radius:6px;
}

.menu-item:hover{
  background:#1f2937;
}

.content{
  flex:1;
  padding:30px;
  overflow:auto;
}

.hidden{
  display:none;
}

.card{
  background:#1e293b;
  padding:20px;
  border-radius:8px;
}

input{
  padding:10px;
  width:100%;
  margin-bottom:10px;
  border-radius:6px;
  border:none;
}

button{
  padding:10px;
  background:#06b6d4;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

.auth{
  max-width:400px;
  margin:100px auto;
  background:#1e293b;
  padding:30px;
  border-radius:10px;
}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="authScreen" class="auth">
<h2 id="authTitle">Login</h2>

<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Senha">

<button onclick="login()">Entrar</button>

<p style="margin-top:15px;">
<span id="toggleText">NÃ£o tem conta?</span>
<a href="#" onclick="toggleAuth()">Criar conta</a>
</p>

<p id="authMessage"></p>
</div>

<!-- APP -->
<div id="app" class="wrapper hidden">

<div class="sidebar">
<h2>NeuroProfit</h2>

<div class="menu-item" onclick="openPage('dashboard')">ğŸ  Dashboard</div>
<div class="menu-item" onclick="openPage('gerador')">âœï¸ Gerador</div>
<div class="menu-item" onclick="openPage('historico')">ğŸ“Š HistÃ³rico</div>
<div class="menu-item" onclick="openPage('analytics')">ğŸ“ˆ Analytics</div>
<div class="menu-item" onclick="openPage('pro')">ğŸ’ Plano PRO</div>
<div class="menu-item" onclick="openPage('limites')">ğŸ§  Limites</div>
<div class="menu-item" onclick="openPage('config')">âš™ï¸ ConfiguraÃ§Ãµes</div>
<div class="menu-item" id="adminBtn" onclick="openPage('admin')">ğŸ›  Admin</div>

<button style="margin-top:auto;background:#ef4444;" onclick="logout()">Sair</button>
</div>

<div class="content">

<div id="dashboard" class="card">Dashboard</div>
<div id="gerador" class="card hidden">Gerador</div>
<div id="historico" class="card hidden">HistÃ³rico</div>
<div id="analytics" class="card hidden">Analytics</div>
<div id="pro" class="card hidden">Plano PRO</div>
<div id="limites" class="card hidden">Limites</div>
<div id="config" class="card hidden">ConfiguraÃ§Ãµes</div>
<div id="admin" class="card hidden">Painel Administrativo</div>

</div>
</div>

<script>

const supabaseClient = window.supabase.createClient(
  "https://fgatcdryezszrojoledj.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZnYXRjZHJ5ZXpzenJvam9sZWRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExNTA2NTEsImV4cCI6MjA4NjcyNjY1MX0.kv9k1EkVYGYUpUcpdGMIF_n3uGFlAxa37nCjx-ZsDaM"
);

let isLogin = true;

function toggleAuth(){
  isLogin = !isLogin;

  document.getElementById("authTitle").innerText =
  isLogin ? "Login" : "Criar Conta";

  document.querySelector("button").innerText =
  isLogin ? "Entrar" : "Criar Conta";

  document.getElementById("toggleText").innerText =
  isLogin ? "NÃ£o tem conta?" : "JÃ¡ tem conta?";
}

async function login(){
  const email = emailInput.value;
  const password = passwordInput.value;

  if(isLogin){
    const { error } = await supabaseClient.auth.signInWithPassword({email,password});
    if(error) return authMessage.innerText = error.message;
  }else{
    const { error } = await supabaseClient.auth.signUp({email,password});
    if(error) return authMessage.innerText = error.message;
  }

  startApp();
}

async function startApp(){
  document.getElementById("authScreen").classList.add("hidden");
  document.getElementById("app").classList.remove("hidden");

  const { data:{user} } = await supabaseClient.auth.getUser();

  // exemplo simples de admin
  if(user.email !== "SEU_EMAIL_ADMIN"){
    document.getElementById("adminBtn").style.display="none";
  }
}

async function logout(){
  await supabaseClient.auth.signOut();
  location.reload();
}

function openPage(page){
  document.querySelectorAll(".content > div")
  .forEach(el=>el.classList.add("hidden"));

  document.getElementById(page).classList.remove("hidden");
}

document.addEventListener("DOMContentLoaded",async()=>{
  const { data:{user} } = await supabaseClient.auth.getUser();
  if(user) startApp();
});

</script>

</body>
</html>
